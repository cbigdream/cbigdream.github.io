<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>昨夜梦飞花</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://channelsray.github.io/"/>
  <updated>2020-01-28T02:37:20.744Z</updated>
  <id>https://channelsray.github.io/</id>
  
  <author>
    <name>昨夜梦飞花</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>VSCode插件提升hexo体验</title>
    <link href="https://channelsray.github.io/2019/05/23/VSCode%E6%8F%92%E4%BB%B6%E6%8F%90%E5%8D%87hexo%E4%BD%93%E9%AA%8C/"/>
    <id>https://channelsray.github.io/2019/05/23/VSCode插件提升hexo体验/</id>
    <published>2019-05-23T07:19:07.000Z</published>
    <updated>2020-01-28T02:37:20.744Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo的编写与部署可以通过vscode进行，同时通过对插件的使用也可以增强体验，提升效率</p><a id="more"></a><h2 id="1-图片剪切插件-Paste-Image"><a href="#1-图片剪切插件-Paste-Image" class="headerlink" title="1. 图片剪切插件 Paste Image"></a>1. 图片剪切插件 <a href="https://marketplace.visualstudio.com/items?itemName=mushan.vscode-paste-image" target="_blank" rel="noopener">Paste Image</a></h2><p>hexo3.0版本中可以在_config.yml中设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure><p>这样在hexo new 的时候会生成同名的文件夹，同时在md文件中输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img xxx %&#125;</span><br></pre></td></tr></table></figure><p>就可以插入这个文件夹中的图片。为了方便进行这个步骤，使用vscode中的插件Paste Image，安装之后，在user-settings里新增两条配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;pasteImage.path&quot;: &quot;$&#123;currentFileNameWithoutExt&#125;/&quot;,</span><br><span class="line">&quot;pasteImage.insertPattern&quot;: &quot;&#123;% asset_img $&#123;imageFilePath&#125; %&#125;&quot;</span><br></pre></td></tr></table></figure><p>这样粘贴图片的时候会自动保存到文件夹中，并自动引用。注意这个插件只适合与剪切板使用，直接拖拽文件是不管用的。</p><h2 id="2-markdown预览插件-Markdown-Preview-Enhanced"><a href="#2-markdown预览插件-Markdown-Preview-Enhanced" class="headerlink" title="2. markdown预览插件 Markdown Preview Enhanced"></a>2. markdown预览插件 <a href="https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced" target="_blank" rel="noopener">Markdown Preview Enhanced</a></h2><p>利用该插件预览</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img xxx %&#125;</span><br></pre></td></tr></table></figure><p>形式插入的图片，主要分为两步</p><h5 id="1-ctrl-shift-P-找到-Markdown-Preview-Enhanced-Extend-Parser，打开parser-js"><a href="#1-ctrl-shift-P-找到-Markdown-Preview-Enhanced-Extend-Parser，打开parser-js" class="headerlink" title="1. ctrl+shift+P 找到 Markdown Preview Enhanced: Extend Parser，打开parser.js"></a>1. ctrl+shift+P 找到 Markdown Preview Enhanced: Extend Parser，打开parser.js</h5><h5 id="2-修改其中onWillParseMarkdown方法为："><a href="#2-修改其中onWillParseMarkdown方法为：" class="headerlink" title="2. 修改其中onWillParseMarkdown方法为："></a>2. 修改其中onWillParseMarkdown方法为：</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">onWillParseMarkdown: <span class="function"><span class="keyword">function</span>(<span class="params">markdown</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span> &#123;</span><br><span class="line">    markdown = markdown.replace(</span><br><span class="line">      /\&#123;%\s*asset_img\s*(.*)\s*%\&#125;/g,</span><br><span class="line">      (whole, content) =&gt; (<span class="string">`![](<span class="subst">$&#123;content&#125;</span>)`</span>)</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> resolve(markdown)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hexo的编写与部署可以通过vscode进行，同时通过对插件的使用也可以增强体验，提升效率&lt;/p&gt;
    
    </summary>
    
      <category term="博客" scheme="https://channelsray.github.io/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="hexo" scheme="https://channelsray.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Tomcat启动时卡住不动</title>
    <link href="https://channelsray.github.io/2019/05/23/Tomcat%E5%90%AF%E5%8A%A8%E6%97%B6%E5%8D%A1%E4%BD%8F/"/>
    <id>https://channelsray.github.io/2019/05/23/Tomcat启动时卡住/</id>
    <published>2019-05-23T06:49:32.000Z</published>
    <updated>2020-01-28T02:37:20.744Z</updated>
    
    <content type="html"><![CDATA[<p>tomcat启动以后卡在INFO: Deploying web application directory …</p><a id="more"></a><p>在weblogic的官方文档中 Monitoring and Troubleshooting 标题为 <a href="https://docs.oracle.com/cd/E13209_01/wlcp/wlss30/configwlss/jvmrand.html" target="_blank" rel="noopener">Avoiding JVM Delays Caused By Random Number Generation</a> 的文档</p><p>The library used for random number generation in Sun’s JVM relies on /dev/random by default for UNIX platforms. This can potentially block the WebLogic SIP Server process because on some operating systems /dev/random waits for a certain amount of “noise” to be generated on the host machine before returning a result. Although /dev/random is more secure, BEA recommends using /dev/urandom if the default JVM configuration delays WebLogic SIP Server startup.</p><p>To determine if your operating system exhibits this behavior, try displaying a portion of the file from a shell prompt:</p><p>head -n 1 /dev/random</p><p>If the command returns immediately, you can use /dev/random as the default generator for SUN’s JVM. If the command does not return immediately, use these steps to configure the JVM to use /dev/urandom:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Open the $JAVA_HOME/jre/lib/security/java.security file in a text editor.</span><br><span class="line">Change the line:</span><br><span class="line">  securerandom.source=file:/dev/random</span><br><span class="line">to read:</span><br><span class="line">  securerandom.source=file:/dev/./urandom</span><br><span class="line">Save your change and exit the text editor.</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;tomcat启动以后卡在INFO: Deploying web application directory …&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://channelsray.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="linux" scheme="https://channelsray.github.io/tags/linux/"/>
    
      <category term="tomcat" scheme="https://channelsray.github.io/tags/tomcat/"/>
    
  </entry>
  
  <entry>
    <title>Linux配置tomcat自动启动</title>
    <link href="https://channelsray.github.io/2019/05/22/Linux%E9%85%8D%E7%BD%AEtomcat%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8/"/>
    <id>https://channelsray.github.io/2019/05/22/Linux配置tomcat自动启动/</id>
    <published>2019-05-22T13:15:00.000Z</published>
    <updated>2019-05-23T12:56:53.717Z</updated>
    
    <content type="html"><![CDATA[<p>将tomcat配置成linux service，跟随linux启动</p><a id="more"></a> <h2 id="1-编辑tomcat-bin-catalina-sh"><a href="#1-编辑tomcat-bin-catalina-sh" class="headerlink" title="1. 编辑tomcat/bin/catalina.sh"></a>1. 编辑tomcat/bin/catalina.sh</h2><p>在catalina.sh中添加java和tomcat环境变量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CATALINA_HOME=/usr/local/tomcat</span><br><span class="line">JAVA_HOME=/usr/lib/java/jdk1.7.0_79</span><br></pre></td></tr></table></figure><p>根据实际情况配置环境变量，然后将catalina.sh复制到/etc/init.d/目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp tomcat/bin/catalina.sh /etc/init.d/tomcat</span><br></pre></td></tr></table></figure><h2 id="2-更新tomcat-service，并启动："><a href="#2-更新tomcat-service，并启动：" class="headerlink" title="2. 更新tomcat service，并启动："></a>2. 更新tomcat service，并启动：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update-rc.d tomcat defaults</span><br><span class="line">service tomcat start</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;将tomcat配置成linux service，跟随linux启动&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://channelsray.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="linux" scheme="https://channelsray.github.io/tags/linux/"/>
    
      <category term="tomcat" scheme="https://channelsray.github.io/tags/tomcat/"/>
    
  </entry>
  
  <entry>
    <title>vsftpd安装与配置</title>
    <link href="https://channelsray.github.io/2019/05/22/vsftpd%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
    <id>https://channelsray.github.io/2019/05/22/vsftpd安装与配置/</id>
    <published>2019-05-22T08:18:06.000Z</published>
    <updated>2019-05-23T12:57:30.324Z</updated>
    
    <content type="html"><![CDATA[<p>vsftpd 是“very secure FTP daemon”的缩写，安全性是它的一个最大的特点。vsftpd 是一个 UNIX 类操作系统上运行的服务器的名字，它可以运行在诸如 Linux、BSD、Solaris、 HP-UNIX等系统上面，是一个完全免费的、开放源代码的ftp服务器软件，支持很多其他的 FTP 服务器所不支持的特征。比如：非常高的安全性需求、带宽限制、良好的可伸缩性、可创建虚拟用户、支持IPv6、速率高等。</p><a id="more"></a> <h2 id="1-安装vsftpd"><a href="#1-安装vsftpd" class="headerlink" title="1. 安装vsftpd"></a>1. 安装vsftpd</h2><p>对于ubuntu系统可以很容易的通过apt-get来安装vsftpd</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install vsftpd</span><br></pre></td></tr></table></figure><p>其配置文件在</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/vsftpd.conf</span><br></pre></td></tr></table></figure><p>根据实际环境需要修改配置文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">#log_ftp_protocol=YES</span><br><span class="line">listen=YES</span><br><span class="line">listen_port=3001 # ftp登陆端口</span><br><span class="line">ftp_data_port=3000 # 主动模式数据端口</span><br><span class="line">port_enable=YES</span><br><span class="line">port_promiscuous=YES</span><br><span class="line">pasv_enable=YES</span><br><span class="line">pasv_address=  # 此处填被动模式所需的外网IP</span><br><span class="line">pasv_addr_resolve=yes</span><br><span class="line">pasv_promiscuous=YES</span><br><span class="line">delete_failed_uploads=YES</span><br><span class="line">#listen_ipv6=YES</span><br><span class="line"># Allow anonymous FTP? (Disabled by default)</span><br><span class="line">anonymous_enable=NO</span><br><span class="line"># Uncomment this to allow local users to log in.</span><br><span class="line">local_enable=YES</span><br><span class="line"># Uncomment this to enable any form of FTP write command.</span><br><span class="line">write_enable=YES</span><br><span class="line"># Default umask for local users is 077. You may wish to change this to 022,</span><br><span class="line"># if your users expect that (022 is used by most other ftpd&apos;s)</span><br><span class="line">local_umask=022</span><br><span class="line">#file_open_mode=0755</span><br><span class="line">#pasv_enable=NO</span><br><span class="line"># Uncomment this to allow the anonymous FTP user to upload files. This only</span><br><span class="line"># has an effect if the above global write enable is activated. Also, you will</span><br><span class="line"># obviously need to create a directory writable by the FTP user.</span><br><span class="line">anon_upload_enable=NO</span><br><span class="line"># Uncomment this if you want the anonymous FTP user to be able to create</span><br><span class="line"># new directories.</span><br><span class="line">anon_mkdir_write_enable=NO</span><br><span class="line"># Activate directory messages - messages given to remote users when they</span><br><span class="line"># go into a certain directory.</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line"># If enabled, vsftpd will display directory listings with the time</span><br><span class="line"># in  your  local  time  zone.  The default is to display GMT. The</span><br><span class="line"># times returned by the MDTM FTP command are also affected by this</span><br><span class="line"># option.</span><br><span class="line">#use_localtime=YES</span><br><span class="line">syslog_enable=YES</span><br><span class="line"># Activate logging of uploads/downloads.</span><br><span class="line">xferlog_enable=YES</span><br><span class="line"># Make sure PORT transfer connections originate from port 20 (ftp-data).</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line"># If you want, you can arrange for uploaded anonymous files to be owned by</span><br><span class="line"># a different user. Note! Using &quot;root&quot; for uploaded files is not</span><br><span class="line"># recommended!</span><br><span class="line">#chown_uploads=YES</span><br><span class="line">#chown_username=whoever</span><br><span class="line"># You may override where the log file goes if you like. The default is shown</span><br><span class="line"># below.</span><br><span class="line">xferlog_file=/var/log/xferlog.log</span><br><span class="line"># If you want, you can have your log file in standard ftpd xferlog format.</span><br><span class="line"># Note that the default log file location is /var/log/xferlog in this case.</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">dual_log_enable=YES</span><br><span class="line">vsftpd_log_file=/var/log/vsftpd.log</span><br><span class="line"># You may change the default value for timing out an idle session.</span><br><span class="line">#idle_session_timeout=600</span><br><span class="line"># You may change the default value for timing out a data connection.</span><br><span class="line">#data_connection_timeout=120  # 数据连接超时</span><br><span class="line"># It is recommended that you define on your system a unique user which the</span><br><span class="line"># ftp server can use as a totally isolated and unprivileged user.</span><br><span class="line">#nopriv_user=ftpsecure</span><br><span class="line"># Enable this and the server will recognise asynchronous ABOR requests. Not</span><br><span class="line"># recommended for security (the code is non-trivial). Not enabling it,</span><br><span class="line"># however, may confuse older FTP clients.</span><br><span class="line">#async_abor_enable=YES</span><br><span class="line"># By default the server will pretend to allow ASCII mode but in fact ignore</span><br><span class="line"># the request. Turn on the below options to have the server actually do ASCII</span><br><span class="line"># mangling on files when in ASCII mode.</span><br><span class="line"># Beware that on some FTP servers, ASCII support allows a denial of service</span><br><span class="line"># attack (DoS) via the command &quot;SIZE /big/file&quot; in ASCII mode. vsftpd</span><br><span class="line"># predicted this attack and has always been safe, reporting the size of the</span><br><span class="line"># raw file.</span><br><span class="line"># ASCII mangling is a horrible feature of the protocol.</span><br><span class="line">ascii_upload_enable=YES</span><br><span class="line">ascii_download_enable=YES</span><br><span class="line"># You may fully customise the login banner string:</span><br><span class="line">#ftpd_banner=Welcome to blah FTP service.</span><br><span class="line"># You may specify a file of disallowed anonymous e-mail addresses. Apparently</span><br><span class="line"># useful for combatting certain DoS attacks.</span><br><span class="line">#deny_email_enable=YES</span><br><span class="line"># (default follows)</span><br><span class="line">#banned_email_file=/etc/vsftpd.banned_emails</span><br><span class="line"># You may restrict local users to their home directories.  See the FAQ for</span><br><span class="line"># the possible risks in this before using chroot_local_user or</span><br><span class="line"># chroot_list_enable below.</span><br><span class="line">#chroot_local_user=YES</span><br><span class="line"># You may specify an explicit list of local users to chroot() to their home</span><br><span class="line"># directory. If chroot_local_user is YES, then this list becomes a list of</span><br><span class="line"># users to NOT chroot().</span><br><span class="line"># (Warning! chroot&apos;ing can be very dangerous. If using chroot, make sure that</span><br><span class="line"># the user does not have write access to the top level directory within the</span><br><span class="line"># chroot)</span><br><span class="line">chroot_local_user=YES</span><br><span class="line">allow_writeable_chroot=YES</span><br><span class="line">chroot_list_enable=YES </span><br><span class="line"># (default follows)</span><br><span class="line">chroot_list_file=/etc/vsftpd.chroot_list </span><br><span class="line">#chroot_list_enable=YES chroot_local_user=YES</span><br><span class="line">#1.所有用户都被限制在其主目录下 2.使用chroot_list_file指定的用户列表，这些用户作为“例外”，不受限制</span><br><span class="line">#chroot_list_enable=YES chroot_local_user=NO</span><br><span class="line">#1.所有用户都不被限制其主目录下 2.使用chroot_list_file指定的用户列表，这些用户作为“例外”，受到限制</span><br><span class="line">#chroot_list_enable=NO chroot_local_user=YES</span><br><span class="line">#1.所有用户都被限制在其主目录下 2.不使用chroot_list_file指定的用户列表，没有任何“例外”用户</span><br><span class="line">#chroot_list_enable=NO chroot_local_user=NO</span><br><span class="line">#1.所有用户都不被限制其主目录下 2.不使用chroot_list_file指定的用户列表，没有任何“例外”用户</span><br><span class="line"># You may activate the &quot;-R&quot; option to the builtin ls. This is disabled by</span><br><span class="line"># default to avoid remote users being able to cause excessive I/O on large</span><br><span class="line"># sites. However, some broken FTP clients such as &quot;ncftp&quot; and &quot;mirror&quot; assume</span><br><span class="line"># the presence of the &quot;-R&quot; option, so there is a strong case for enabling it.</span><br><span class="line">#ls_recurse_enable=YES</span><br><span class="line"># This option should be the name of a directory which is empty.  Also, the</span><br><span class="line"># directory should not be writable by the ftp user. This directory is used</span><br><span class="line"># as a secure chroot() jail at times vsftpd does not require filesystem</span><br><span class="line"># access.</span><br><span class="line">secure_chroot_dir=/var/run/vsftpd/empty</span><br><span class="line"># This string is the name of the PAM service vsftpd will use.</span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line"># This option specifies the location of the RSA certificate to use for SSL</span><br><span class="line"># encrypted connections.</span><br><span class="line">#rsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem</span><br><span class="line"># This option specifies the location of the RSA key to use for SSL</span><br><span class="line"># encrypted connections.</span><br><span class="line">#local_root=/home/uftp</span><br><span class="line">#rsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key</span><br><span class="line">userlist_deny=NO</span><br><span class="line">userlist_enable=YES</span><br><span class="line">userlist_file=/etc/allowed_users </span><br><span class="line"># 当且仅当userlist_enable=YES时：userlist_deny项的配置才有效，user_list文件才会被使用；当其为NO时，无论userlist_deny项为何值都是无效的，本地全体用户（除去ftpusers中的用户）都可以登入FTP</span><br><span class="line"># 当userlist_enable=YES时，userlist_deny=YES时：user_list是一个黑名单，即：所有出现在名单中的用户都会被拒绝登入；</span><br><span class="line"># 当userlist_enable=YES时，userlist_deny=NO时：user_list是一个白名单，即：只有出现在名单中的用户才会被准许登入(user_list之外的用户都被拒绝登入)；另外需要特别提醒的是：使用白名单后，匿名用户将无法登入！除非显式在user_list中加入一行：anonymous</span><br><span class="line">seccomp_sandbox=NO</span><br><span class="line"># ssl config</span><br><span class="line">ssl_enable=YES</span><br><span class="line">allow_anon_ssl=NO</span><br><span class="line">force_local_data_ssl=NO</span><br><span class="line">force_local_logins_ssl=NO</span><br><span class="line">force_anon_logins_ssl=NO</span><br><span class="line">force_anon_data_ssl=NO</span><br><span class="line">ssl_tlsv1=YES</span><br><span class="line">ssl_sslv2=YES</span><br><span class="line">ssl_sslv3=YES</span><br><span class="line">require_ssl_reuse=NO</span><br><span class="line">debug_ssl=YES</span><br><span class="line">strict_ssl_read_eof=YES</span><br><span class="line">strict_ssl_write_shutdown=YES</span><br><span class="line">ssl_ciphers=HIGH</span><br><span class="line">rsa_cert_file=/etc/ssl/certs/vsftpd.pem</span><br><span class="line">rsa_private_key_file=/etc/ssl/certs/vsftpd.pem</span><br><span class="line">pasv_max_port=31000</span><br><span class="line">pasv_min_port=30000</span><br><span class="line">data_connection_timeout=8</span><br></pre></td></tr></table></figure><p>/etc/vsftpd.chroot_list 中加入root用户作为例外，可以不被限制在主目录下<br>/etc/allow_users 中加入允许登陆的用户</p><h2 id="2-创建用户"><a href="#2-创建用户" class="headerlink" title="2. 创建用户"></a>2. 创建用户</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd -d /home/temp temp</span><br><span class="line">passwd temp</span><br><span class="line">usermod -s /usr/sbin/nologin temp</span><br></pre></td></tr></table></figure><p>添加用户temp，用户根目录/home/temp，设置密码，设置权限为/usr/sbin/nologin,禁止登陆，此处需要注意不同系统nologin的目录不同。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;vsftpd 是“very secure FTP daemon”的缩写，安全性是它的一个最大的特点。vsftpd 是一个 UNIX 类操作系统上运行的服务器的名字，它可以运行在诸如 Linux、BSD、Solaris、 HP-UNIX等系统上面，是一个完全免费的、开放源代码的ftp服务器软件，支持很多其他的 FTP 服务器所不支持的特征。比如：非常高的安全性需求、带宽限制、良好的可伸缩性、可创建虚拟用户、支持IPv6、速率高等。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://channelsray.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="linux" scheme="https://channelsray.github.io/tags/linux/"/>
    
      <category term="vsftpd" scheme="https://channelsray.github.io/tags/vsftpd/"/>
    
  </entry>
  
</feed>
